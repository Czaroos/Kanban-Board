(this["webpackJsonpkanban-board"]=this["webpackJsonpkanban-board"]||[]).push([[0],{67:function(n,e,t){n.exports=t(80)},79:function(n,e,t){},80:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(8),i=t.n(a),c=t(12),u=t(13),l=t(53),d=t(44),p=t(15);function s(n){return function(e){fetch("/all",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.FETCH_COLUMNS,payload:n})}))}}var f={ADD_TASK:"ADD_TASK",ADD_COLUMN:"ADD_COLUMN",DRAG_HAPPENED:"DRAG_HAPPENED",EDIT_TASK:"EDIT_TASK",DELETE_TASK:"DELETE_TASK",EDIT_COLUMN:"EDIT_COLUMN",DELETE_COLUMN:"DELETE_COLUMN",FETCH_COLUMNS:"FETCH_COLUMNS"},m=[],b=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f.FETCH_COLUMNS:var t=e.payload.map((function(n){var e=n.tasks.map((function(n){return{id:n._id,content:n.content,columnID:n.columnId,priority:n.priority}}));return{id:n._id,title:n.title,limit:n.limit,tasks:e,index:n.index}}));return t.sort((function(n,e){return n.index>e.index?1:-1}));case f.ADD_COLUMN:var r={id:e.payload._id,title:e.payload.title,limit:e.payload.limit,tasks:[],index:e.payload.index};return[].concat(Object(p.a)(n),[r]);case f.ADD_TASK:var o=e.payload.tasks[e.payload.tasks.length-1],a={id:o._id,content:o.content,columnID:o.columnId},i=n.map((function(n){return n.id===a.columnID?(n.limit--,Object(d.a)({},n,{tasks:[].concat(Object(p.a)(n.tasks),[a])})):n}));return i;case f.DRAG_HAPPENED:var c=e.payload,u=c.droppableIdStart,l=c.droppableIdEnd,s=c.droppableIndexStart,b=c.droppableIndexEnd,h=c.type,g=Object(p.a)(n);if("column"===h){var v=g.splice(s,1);return g.splice.apply(g,[b,0].concat(Object(p.a)(v))),g.map((function(n,e){return n.index=e,n})),g}if(u===l){var x,E=n.find((function(n){return u===n.id})),O=E.tasks.splice(s,1);(x=E.tasks).splice.apply(x,[b,0].concat(Object(p.a)(O)))}if(u!==l){var y,j=n.find((function(n){return u===n.id}));j.limit++;var k=j.tasks.splice(s,1),D=k.map((function(n){return n.columnID=l,n})),C=n.find((function(n){return l===n.id}));C.limit--,(y=C.tasks).splice.apply(y,[b,0].concat(Object(p.a)(D)))}return g;case f.EDIT_TASK:var S=e.payload,I=S._id,A=S.content,T=S.userId,w=S.priority,_=S.columnId;return n.map((function(n){if(n.id===_){var e=n.tasks.map((function(n){return n.id===I?(n.content=A,n.priority=w,n.userID=T,n):n}));return Object(d.a)({},n,{tasks:e})}return n}));case f.DELETE_TASK:var N=e.payload,L=N._id,M=N.columnID;return n.map((function(n){if(n.id===M){n.limit++;var e=n.tasks.filter((function(n){return n.id!==L}));return Object(d.a)({},n,{tasks:e})}return n}));case f.EDIT_COLUMN:var P=e.payload,F=P._id,U=P.title,K=P.limit;return n.map((function(n){return n.id===F?(n.title=U,n.limit=K,n):n}));case f.DELETE_COLUMN:var z=Object(p.a)(n),H=e.payload,R=z.filter((function(n){return n.id!==H}));return R.map((function(n,e){return n.index=e,n}));default:return n}},h=Object(u.c)({columns:b}),g=[l.a],v=Object(u.e)(h,{},Object(u.d)(u.a.apply(void 0,g))),x=t(14),E=t(20),O=t(17),y=t(18),j=t(3),k=t(26),D=t(25),C=t(4),S=t(108),I=t(105);function A(){var n=Object(j.a)(["\n  margin-top: 6px;\n  margin-bottom: 6px;\n"]);return A=function(){return n},n}function T(){var n=Object(j.a)(["\n  border-radius: 3px;\n  width: 295px;\n  color: #eee;\n  resize: none;\n  overflow: hidden;\n  outline: none;\n  background-color: rgba(255, 255, 255, 0.15);\n  border: 1px solid rgba(1, 11, 15);\n\n\n  ::placeholder {\n    color: #eee;\n  }\n"]);return T=function(){return n},n}function w(){var n=Object(j.a)(["\ndisplay: flex;\nflex-direction: column;\n"]);return w=function(){return n},n}var _=C.a.div(w()),N=Object(C.a)(I.a)(T()),L=C.a.div(A()),M=o.a.memo((function(n){var e=n.placeholder,t=n.content,r=void 0===t?"":t,a=n.onChange,i=n.closeForm,c=n.children;return o.a.createElement(_,null,o.a.createElement(N,{rowsMin:2,autoFocus:!0,placeholder:e,value:r,onChange:function(n){return a(n)},onBlur:i}),o.a.createElement(L,null,c))})),P=t(114);function F(){var n=Object(j.a)(["\n&& {\n    color: white;\n    background: #333;\n}\n"]);return F=function(){return n},n}var U=Object(C.a)(P.a)(F()),K=function(n){var e=n.children,t=n.onClick;return o.a.createElement(U,{variant:"contained",onMouseDown:t},e)},z=t(43),H=(t(51),t(49)),R=t(109),J=t(110),B=t(111),G=t(60),Y=t.n(G);function q(){var n=Object(j.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  color: red;\n\n\n  ",":hover & {\n    opacity: 0;\n  }\n"]);return q=function(){return n},n}function Q(){var n=Object(j.a)(["\n  position: absolute;\n  display: none;\n  right: 5px;\n  bottom: 5px;\n  opacity: 0.5;\n  ",":hover & {\n    display: block;\n    cursor: pointer;\n  }\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return Q=function(){return n},n}function V(){var n=Object(j.a)(["\n  && {\n    background-color: inherit;\n    border: 1px solid #ccc;\n    -webkit-box-shadow: 1px 1px 3px 1px rgba(255, 255, 255, 0.1);\n    -moz-box-shadow: 1px 1px 3px 1px rgba(255, 255, 255, 0.1);\n    box-shadow: 1px 1px 3px 1px rgba(255, 255, 255, 0.1);\n    color: white;\n    padding-right: 16px;\n        \n    &:active {\n      border: 1px solid rgba(1, 11, 15);\n      background-color: rgba(0, 0, 0, 0.3);\n    }\n  \n    &:hover {\n      border: 1px solid rgba(1, 11, 15);\n      background-color: rgba(0, 0, 0, 0.2);\n    }\n  }\n"]);return V=function(){return n},n}function W(){var n=Object(j.a)(["\n  position: absolute;\n  display: none;\n  right: 5px;\n  top: 5px;\n  opacity: 0.5;\n  ",":hover & {\n    display: block;\n    cursor: pointer;\n  }\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return W=function(){return n},n}function X(){var n=Object(j.a)(["\n  margin: 0 0 8px 0;\n  position: relative;\n  max-width: 100%;\n  word-wrap: break-word;\n"]);return X=function(){return n},n}var Z=C.a.div(X()),$=Object(C.a)(S.a)(W(),Z),nn=Object(C.a)(R.a)(V()),en=Object(C.a)(S.a)(Q(),Z),tn=Object(C.a)(Y.a)(q(),Z),rn=o.a.memo((function(n){var e=n.content,t=n.id,a=n.columnID,i=n.userID,c=n.priority,u=n.index,l=n.dispatch,d=Object(r.useState)(!1),p=Object(k.a)(d,2),s=p[0],m=p[1],b=Object(r.useState)(e),h=Object(k.a)(b,2),g=h[0],v=h[1],x=Object(H.b)({opacity:1,from:{opacity:0},config:{duration:400}}),E=function(n){m(!1)},O=function(n){v(n.target.value)},y=function(n){(n.preventDefault(),0!==g.trim().length)&&l(function(n){return function(e){fetch("/tasks/"+n.id,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.EDIT_TASK,payload:n})}))}}({id:t,content:g,columnID:a,userID:i,priority:c}));m(!1)},j=function(){var n;l((n={id:t,columnID:a},function(e){fetch("/tasks/delete/"+n.id,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.DELETE_TASK,payload:n})}))}))},C=function(){Object(z.confirmAlert)({title:"Alert!",message:"Are you sure you want to delete this task ?",buttons:[{label:"Yes",onClick:function(){return j()}},{label:"No",onClick:function(){return null}}],closeOnEscape:!0,closeOnClickOutside:!0})};return s?o.a.createElement(M,{content:g,onChange:O,closeForm:E},o.a.createElement(K,{onClick:y},"Save")):o.a.createElement(H.a.div,{style:x},o.a.createElement(D.b,{draggableId:t,index:u},(function(n){return o.a.createElement(Z,Object.assign({},n.draggableProps,n.dragHandleProps,{ref:n.innerRef,onDoubleClick:function(){return m(!0)}}),o.a.createElement(nn,null,"high"===c?o.a.createElement(tn,{fontSize:"small"}):null,o.a.createElement($,{fontSize:"small",onMouseDown:function(){return m(!0)}},"edit"),o.a.createElement(en,{fontSize:"small",onMouseDown:C},"delete"),o.a.createElement(J.a,null,o.a.createElement(B.a,null,e))))})))})),on=Object(c.b)()(rn);function an(){var n=Object(j.a)(["\n  margin-left: 5px;\n  margin-right: 8px;\n  padding-bottom: 2px;\n"]);return an=function(){return n},n}function cn(){var n=Object(j.a)(["\ndisplay: flex;\nalign-items: center;\ncursor: pointer;\nborder-radius: 3px;\nheight: 36px;\nwidth: 290px;\npadding-left: 10px;\nopacity: 0.8;\ncolor: white;\nbackground-color: inherit;\n\n&:hover {\n  background-color: rgba(0,0,0,0.2);\n  border: 1px solid rgba(1, 11, 15);\n}\n"]);return cn=function(){return n},n}var un=C.a.div(cn()),ln=Object(C.a)(S.a)(an()),dn=function(n){var e=n.children,t=n.onClick;return o.a.createElement(un,{onClick:t},o.a.createElement(ln,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},e))},pn=function(n){Object(y.a)(t,n);var e=Object(O.a)(t);function t(){var n;Object(x.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))).state={formOpen:!1,content:""},n.openForm=function(){n.setState({formOpen:!0})},n.closeForm=function(e){n.setState({formOpen:!1})},n.handleInputChange=function(e){n.setState({content:e.target.value})},n.handleAddColumn=function(){var e=n.state.content;if(e&&(n.setState({content:""}),0!==e.trim().length)){var t={title:e};n.props.addColumn(t)}},n.handleAddTask=function(){var e=n.props.columnID,t=n.state.content;if(t&&(n.setState({content:""}),0!==t.trim().length)){var r={content:t,columnID:e};n.props.addTask(r)}},n.renderOpenForm=function(){var e=n.props.isColumn?"Add a column":"Add a task";return o.a.createElement(dn,{onClick:n.openForm},o.a.createElement(S.a,null,"add"),o.a.createElement("p",{style:{flexShrink:0}},e))},n}return Object(E.a)(t,[{key:"render",value:function(){var n=this.state.content,e=this.props.isColumn,t=e?"Enter a column name...":"Enter a task description...";return this.state.formOpen?o.a.createElement(M,{content:n,placeholder:t,onChange:this.handleInputChange,closeForm:this.closeForm},o.a.createElement(K,{onClick:e?this.handleAddColumn:this.handleAddTask},e?"Add a column":"Add a task")):o.a.createElement(dn,{onClick:this.openForm},e?"Add another column":"Add another task")}}]),t}(o.a.PureComponent),sn={addTask:function(n){return function(e){fetch("/tasks/add",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.ADD_TASK,payload:n})}))}},addColumn:function(n){return function(e){fetch("/columns/add/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.ADD_COLUMN,payload:n})}))}}},fn=Object(c.b)(null,sn)(pn),mn=t(62),bn=t.n(mn),hn=t(113),gn=t(112),vn=t(61),xn=t.n(vn);function En(){var n=Object(j.a)(["\n    color: red;\n    text-shadow: none;\n\n    && {\n        font-weight: 100;\n    }\n"]);return En=function(){return n},n}function On(){var n=Object(j.a)(["\n  color: rgba(255,0,0,0.9);\n  margin-right: 5px;\n"]);return On=function(){return n},n}var yn=Object(C.a)(xn.a)(On()),jn=Object(C.a)(B.a)(En()),kn=Object(gn.a)((function(n){return{popover:{pointerEvents:"none"},paper:{padding:n.spacing(1)}}}));function Dn(){var n=kn(),e=o.a.useState(null),t=Object(k.a)(e,2),r=t[0],a=t[1],i=function(){a(null)},c=Boolean(r);return o.a.createElement("div",null,o.a.createElement(B.a,{"aria-owns":c?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(n){a(n.currentTarget)},onMouseLeave:i},o.a.createElement(yn,null)),o.a.createElement(hn.a,{id:"mouse-over-popover",className:n.popover,classes:{paper:n.paper},open:c,anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:i,disableRestoreFocus:!0},o.a.createElement(jn,null,"Task limit exceeded!")))}function Cn(){var n=Object(j.a)(["\n  margin-left: 10px;\n  min-width: 24px;\n  min-height: 28.8px;\n  margin-bottom: 5px;\n  margin-right: 10px;\n  cursor: text;\n  text-transform: uppercase;\n  &:hover {\n    opacity: 0.5;\n  }\n"]);return Cn=function(){return n},n}function Sn(){var n=Object(j.a)(["\n  cursor: text;\n  text-transform: uppercase;\n  &:hover {\n    opacity: 0.5;\n  }\n"]);return Sn=function(){return n},n}function In(){var n=Object(j.a)(["\n  cursor: pointer;\n  margin-left: 10px;\n  opacity: 0.5;\n  &:hover {\n    opacity: 0.8;\n  }\n"]);return In=function(){return n},n}function An(){var n=Object(j.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return An=function(){return n},n}function Tn(){var n=Object(j.a)(["\n  width: 8%;\n  background-color: inherit;\n  border: none;\n  outline: none;\n  border-bottom: 2px solid #03a8f45e;\n  margin-bottom: 5px;\n  margin-left: 0px;\n  text-size: 1.4rem;\n  text-align: center;\n  padding: 5px;\n  color: white;\n"]);return Tn=function(){return n},n}function wn(){var n=Object(j.a)(["\n  width: 80%;\n  background-color: inherit;\n  border: none;\n  outline: none;\n  border-bottom: 2px solid #03a8f45e;\n  margin-bottom: 5px;\n  margin-left: 23px;\n  font-size: 1.4rem;\n  text-align: center;\n  padding: 5px;\n  color: white;\n"]);return wn=function(){return n},n}function _n(){var n=Object(j.a)(["\n  color: white;\n  border: 1px solid rgba(1, 11, 15, 0.3);\n  -webkit-box-shadow: 1px 1px 3px 1px rgba(1, 11, 15, 0.3);\n  -moz-box-shadow: 1px 1px 3px 1px rgba(1, 11, 15, 0.3);\n  box-shadow: 1px 1px 3px 1px rgba(1, 11, 15, 0.3);\n  border-radius: 3px;\n  background-color: rgba(0,0,0,0.1);\n  width: 300px;\n  height: 100%;\n  margin-right: 12px;\n  padding: 8px;\n\n  &:active {\n    border: 1px solid rgba(0, 0, 0);\n    background-color: rgba(0,0,0,0.3)\n    }\n\n  &:hover {\n    border: 1px solid rgba(0, 0, 0);\n    background-color: rgba(0,0,0,0.2)\n    }\n\n  .\n"]);return _n=function(){return n},n}var Nn=C.a.div(_n()),Ln=C.a.input(wn()),Mn=C.a.input(Tn()),Pn=C.a.div(An()),Fn=Object(C.a)(S.a)(In()),Un=C.a.h3(Sn()),Kn=C.a.h3(Cn()),zn=Object(c.b)((function(n){return{columns:n.columns}}))((function(n){var e=n.title,t=n.tasks,a=n.limit,i=n.id,c=n.index,u=n.dispatch,l=n.columns,d=Object(r.useState)(!1),p=Object(k.a)(d,2),m=p[0],b=p[1],h=Object(r.useState)(!1),g=Object(k.a)(h,2),v=g[0],x=g[1],E=function(){b(!1),x(!1)},O=function(n){n.target.select()},y=function(n){n.preventDefault(),m&&(e=n.target.value),v&&(a=n.target.value)},j=function(){var n=a;(/[0-9]/.test(n)||(n=-99999),b(!1),x(!1),0!==e.trim().length)&&u(function(n){return function(e){fetch("/columns/"+n.id,{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(n){return n.json()})).then((function(n){return e({type:f.EDIT_COLUMN,payload:n})}))}}({id:i,title:e,limit:n,tasks:t,index:c}))},C=function(){u(function(n){return function(e){fetch("/columns/"+n,{method:"DELETE"}).then((function(n){return n.json()})).then((function(n){return e({type:f.DELETE_COLUMN,payload:n})}))}}(i));var n=l.filter((function(n){return n.id!==i}));u(s(n.map((function(n,e){return n.index=e,n}))))},S=function(){Object(z.confirmAlert)({title:"Alert!",message:"Are you sure you want to delete this column ?",buttons:[{label:"Yes",onClick:function(){return C()}},{label:"No",onClick:function(){return null}}],closeOnEscape:!0,closeOnClickOutside:!0})};return o.a.createElement(D.b,{key:i,draggableId:i,index:c},(function(n){return o.a.createElement(Nn,Object.assign({},n.draggableProps,{ref:n.innerRef},n.dragHandleProps),m||v?m?o.a.createElement("form",{onSubmit:j},o.a.createElement(Ln,{type:"text",onChange:y,value:r,autoFocus:!0,onFocus:O,onBlur:E})):o.a.createElement("form",{onSubmit:j},o.a.createElement(Mn,{type:"text",onChange:y,value:r,autoFocus:!0,onFocus:O,onBlur:E})):o.a.createElement(Pn,null,o.a.createElement(Kn,{onClick:function(){return x(!0)}},a<=-9999?o.a.createElement(bn.a,null):a<=0?o.a.createElement(Dn,null):a),o.a.createElement(Un,{onClick:function(){return b(!0)}},e),o.a.createElement(Fn,{onClick:S},"delete")),o.a.createElement(D.c,{droppableId:i},(function(n){return o.a.createElement("div",Object.assign({},n.droppableProps,{ref:n.innerRef}),t.map((function(n,e){return o.a.createElement(on,{id:n.id,index:e,key:n.id,content:n.content,columnID:n.columnID,userID:n.userID,priority:n.priority})})),n.placeholder,o.a.createElement(fn,{columnID:i}))})));var r}))}));function Hn(){var n=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Hn=function(){return n},n}var Rn=C.a.div(Hn()),Jn=function(n){Object(y.a)(t,n);var e=Object(O.a)(t);function t(){var n;Object(x.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))).onDragEnd=function(e){var t=e.destination,r=e.source,o=e.draggableId,a=e.type,i=n.props.columns;t&&(n.props.sort(r.droppableId,t.droppableId,r.index,t.index,o,a),n.props.dragStateSave(i))},n}return Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchColumns()}},{key:"render",value:function(){var n=this.props.columns;return o.a.createElement(D.a,{onDragEnd:this.onDragEnd},o.a.createElement(D.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(e){return o.a.createElement(Rn,Object.assign({},e.droppableProps,{ref:e.innerRef}),n.map((function(n){return o.a.createElement(zn,{id:n.id,key:n.id,title:n.title,tasks:n.tasks,index:n.index,limit:n.limit})})),e.placeholder,o.a.createElement(fn,{isColumn:!0}))})))}}]),t}(r.PureComponent),Bn={fetchColumns:function(){return function(n){fetch("/all").then((function(n){return n.json()})).then((function(e){return n({type:f.FETCH_COLUMNS,payload:e})}))}},sort:function(n,e,t,r,o,a){return{type:f.DRAG_HAPPENED,payload:{droppableIdStart:n,droppableIdEnd:e,droppableIndexStart:t,droppableIndexEnd:r,draggableId:o,type:a}}},dragStateSave:s},Gn=Object(c.b)((function(n){return{columns:n.columns}}),Bn)(Jn);t(79);i.a.render(o.a.createElement(c.a,{store:v},o.a.createElement(Gn,null)),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.987cbfa5.chunk.js.map